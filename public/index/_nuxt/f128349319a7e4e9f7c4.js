(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{491:function(t,e,n){"use strict";n.r(e);n(38),n(7),n(99),n(6),n(55);var o=n(9),r=n(2),l=n(212),c=n(17),v=n(56),d=n(347),m=n(348),f=n(355),h=n(350),_=n(48),C={head:function(){return{title:"直播详细页 - 尔听美直播"}},data:function(){return{myComments:"",userRate:0,isToll:!0,isLive:!0,isTolled:!1,isLiveVedio:!1,isLiveEnd:!0,orderResponsing:!1,orderOk:!1,bigLiveStatus:!1,livePlayObj:function(){},liveInteractiveType:!0,liveData:{},liveInfo:{},videoInfo:{},liveTypeSrcM3U8:"",liveCommentList:{},liveQuestionList:{},liveInteractiveInput:"",liveWebSocketUserClientID:{},liveWebSocketUserClientName:{},liveWebSocketClientList:{},liveWebSocket:null,randRecommendList:{},currentPage:1,isDisabled:!1,isloginStatus:null}},computed:Object(r.a)({},Object(_.b)(["user"])),components:{Header:d.a,Footer:m.a,ReSubComment:f.a,SidebarTools:h.a},watch:{liveData:function(){this.getQuestionList(),this.addHit(),this.getCommentList()},"user.info":function(){}},methods:{showBuyLiveModal:function(){this.$refs.buyLiveModalRef.show()},closeBuyLiveModal:function(){this.$refs.buyLiveModalRef.hide()},bigLiveBtn:function(){var t=this;Object(c.getToken)()?(t.bigLiveStatus=!0,t.isLiveVedio=!0,t.$nextTick(function(){if(document.querySelector("html").classList.add("overflow-y-hidden"),window.scroll(0,0),$("body").width()<=992){var e=t.$refs.bigLiveCover.offsetHeight;$("#futureLiveVideo").height(e*(1/3)),t.$refs.liveTitleRef.style.display="none",t.$refs.liveInteractiveRef.style.height=e*(2/3)*.8+"px",t.$refs.liveUserInputRef.style.height=e*(2/3)*.2+"px"}else{var n=t.$refs.bigLiveCover.offsetHeight-100;$("#futureLiveVideo").height(n),t.$refs.liveTitleRef.style.height=.2*n+"px",t.$refs.liveInteractiveRef.style.height=.7*n+"px",t.$refs.liveUserInputRef.style.height=.1*n+"px"}$(".live-interactive-nav").css({width:$(".live-content.isLive").width(),left:"auto"}),$(window).on("resize",function(){$(".live-interactive-nav").css({width:$(".live-content.isLive").width(),left:"auto"})}),t.livePlayObj=videojs(t.$refs.liveVideoRef,{language:"zh-CN"}),t.livePlayObj.play()}),t.initWebSocket()):(t.$notify({title:"操作失败",message:"您需要登陆才能进行下一步操作！",type:"warning"}),setTimeout(function(){t.$router.push("/login")},1500))},closeLiveVedio:function(){var t=this;t.bigLiveStatus=!1,t.isLiveVedio=!1,t.$nextTick(function(){document.querySelector("html").classList.remove("overflow-y-hidden"),t.$refs.liveTitleRef.style.height="30%",t.$refs.liveStatus.style.height="50%",t.$refs.livePrice.style.height="20%"}),!t.livePlayObj.paused()&&t.livePlayObj.pause(),t.liveWebSocket.close()},addChat:function(){this.websocketsend('{"type":"say","to_client_id":"'.concat(this.liveWebSocketUserClientID,'","to_client_name":"').concat(this.liveWebSocketUserClientName,'","content":"').concat(this.liveInteractiveInput,'"}'))},addQues:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==(e=this).liveInteractiveInput){t.next=4;break}return e.$message.error("互动消息不得为空！"),t.abrupt("return",!1);case 4:return t.next=6,Object(v.addQuestionApi)(e,e.liveInfo.id,e.liveInteractiveInput);case 6:1===t.sent.code&&(e.getQuestionList(),e.$notify({title:"提问成功",message:"已向主播提交问题，请耐心等待主播回答，答案将在列表显示！",type:"success"}),e.liveInteractiveInput="");case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),isInteractive:function(){this.liveInteractiveType=!0},isQuestion:function(){this.liveInteractiveType=!1},initVideo:function(){"undefined"==typeof videojs&&Object(l.loadScripts)(["//cdn.jsdelivr.net/npm/video.js@7.4.1/dist/video.min.js"]).then(function(){return Object(l.loadScripts)(["//cdn.jsdelivr.net/npm/video.js@7.4.1/dist/lang/zh-CN.js"])}).then(function(){return Object(l.loadStyles)(["//cdn.jsdelivr.net/npm/video.js@7.4.1/dist/video-js.min.css"])}).then(function(){})},initLiveData:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e=this).$route.query.id,t.next=4,Object(v.historyItemApi)(e,n);case 4:1===(o=t.sent).code?(e.liveData=o.data,e.liveInfo=o.data.live_info,e.videoInfo=o.data.video_info,e.liveTypeSrcM3U8=o.data.video_info.url,e.isItemToll(e.liveData.price),e.userRate=o.data.video_info.rate,e.isItemToll(o.data.video_info.price),e.isItemLive(o.data.video_info.live_time)):e.$router.push("/video404");case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),isItemToll:function(t){this.isToll="0.00"!==t},isItemLive:function(t){var e=new Date(t).valueOf(),n=(new Date).valueOf();this.isLive=e<=n},addHit:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,Object(v.videoHitsApi)(e,e.liveInfo.id);case 3:t.sent;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addComment:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==(e=this).myComments){t.next=4;break}return e.$notify({title:"提交错误",message:"评论框不得为空！",type:"error"}),t.abrupt("return",!1);case 4:return t.next=6,Object(v.addCommentApi)(e,e.liveInfo.id,e.myComments);case 6:1===(n=t.sent).code?(e.$notify({title:"发布成功",message:n.msg+"，评论将在主播审核通过显示！",type:"success"}),e.getCommentList(),e.myComments=""):e.$notify({title:"发布失败",message:n.msg,type:"error"});case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addRate:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this,0!==Number(e.userRate)){t.next=3;break}return t.abrupt("return",!1);case 3:return t.next=5,Object(v.addRateApi)(e,e.liveInfo.id,Number(e.userRate));case 5:1===(n=t.sent).code?e.$notify({title:"评价成功",message:n.msg+"，评价将在管理员审核通过显示！",type:"success"}):e.$notify({title:"评价失败",message:n.msg,type:"error"});case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addUserCommentRate:function(){Object(c.getToken)()?(this.addComment(),0===this.liveInfo.rate&&this.addRate()):this.$notify({title:"操作失败",message:"您需要登陆才能进行下一步操作！",type:"warning"})},getCommentList:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,Object(v.commentListApi)(e,e.liveInfo.id,e.currentPage);case 3:return n=t.sent,e.liveCommentList=n.data,t.next=7,Object(v.commentListApi)(e,e.liveInfo.id,e.currentPage+1);case 7:o=t.sent,0===Object.keys(o.data).length&&(e.isDisabled=!0);case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getQuestionList:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,n,data;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,Object(v.getQuestionListApi)(e,e.liveInfo.id);case 3:n=t.sent,data=n.data,e.liveQuestionList=data;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),initWebSocket:function(){this.liveWebSocket=new WebSocket("ws://live.qiniuniu.com:8282"),this.liveWebSocket.onopen=this.websocketonopen,this.liveWebSocket.onerror=this.websocketonerror,this.liveWebSocket.onmessage=this.websocketonmessage,this.liveWebSocket.onclose=this.websocketclose},websocketonopen:function(){var t='{"type":"login","client_name": "'.concat(this.user.info.nickname,'","room_id":"').concat(this.liveInfo.id,'"}');this.websocketsend(t)},websocketonerror:function(t){},websocketonmessage:function(t){var data=JSON.parse(t.data);switch(data.type){case"ping":this.websocketsend('{"type":"ping"}');break;case"login":data.client_list?this.liveWebSocketClientList=data.client_list:this.liveWebSocketClientList[data.client_id]=data.client_name,this.liveWebSocketUserClientID=data.client_id,this.liveWebSocketUserClientName=data.client_name;break;case"say":this.liveSay(data.from_client_id,data.from_client_name,data.content,data.time);break;case"logout":delete this.liveWebSocketClientList[data.from_client_id]}},websocketsend:function(t){this.liveWebSocket.send(t)},websocketclose:function(t){},liveSay:function(t,e,content,time){$(".interactive-list").prepend("<li>".concat(e,"：").concat(content,"</li>")),this.liveInteractiveInput=""},onSubmit:function(t){t.preventDefault(),this.addChat()},randRecommend:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,Object(v.randRecommendApi)(e,3);case 3:n=t.sent,e.randRecommendList=n.data;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),gotoItem:function(t){void 0===t.video_info||null===t.video_info?this.$router.push({path:"/future/item",query:{id:t.id}}):this.$router.push({path:"/history/item",query:{id:t.video_info.id}})},currentChange:function(t){this.currentPage=t},isLogin:function(){Object(c.getToken)()?(this.isloginStatus=!0,this.$store.dispatch("GetUserInfo")):this.isloginStatus=!1},gotoServer:function(){window.open("http://sighttp.qq.com/authd?IDKEY=10365b8225e8adaf029f5c2cebf9e5f395d45d4b1ed8a8a4")}},beforeCreate:function(){},created:function(){this.isLogin(),this.initLiveData(),this.randRecommend()},beforeMount:function(){},mounted:function(){this.initVideo()},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},y=(n(389),n(24)),component=Object(y.a)(C,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"future-live-item"},[n("Header"),t._v(" "),n("main",{staticClass:"live-future-item",attrs:{role:"main live-future"}},[n("div",{staticClass:"container"},[n("div",{staticClass:"live-breadcrumb my-4"},[n("i",{staticClass:"fas fa-map-marker-alt"}),t._v(" "),n("nuxt-link",{staticClass:"breadcrumb-link",attrs:{to:"/"}},[t._v("首页")]),t._v("\n          >\n          "),n("nuxt-link",{staticClass:"breadcrumb-link",attrs:{to:"/future"}},[t._v("往期")]),t._v("\n          >\n          "),n("nuxt-link",{staticClass:"breadcrumb-link",attrs:{to:"#"}},[t._v("往期详细")]),t._v("\n          >\n          "),n("nuxt-link",{staticClass:"breadcrumb-link-active",attrs:{to:"#"}},[t._v(t._s(t.liveInfo.title))])],1),t._v(" "),n("div",{staticClass:"live-play",class:{"big-live bounceInDown animated-1000ms":t.bigLiveStatus}},[n("b-row",{staticStyle:{"margin-right":"0","margin-left":"0"}},[t.isLive?n("b-col",{staticClass:"px-0",attrs:{md:"12",lg:"8",xl:"8"}},[n("div",{staticClass:"position-relative video-play-block",class:{"video-play":t.isLiveVedio}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isLiveVedio,expression:"isLiveVedio"}]},[n("video",{ref:"liveVideoRef",staticClass:"video-js vjs-default-skin",attrs:{id:"futureLiveVideo",controls:"",preload:"auto"}},[n("source",{attrs:{src:t.liveTypeSrcM3U8,type:"video/mp4"}})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLiveVedio,expression:"!isLiveVedio"}]},[n("div",{staticClass:"video-author d-flex position-absolute"},[n("div",{staticClass:"left"},[n("img",{attrs:{src:t.liveInfo.avatar,width:"40",height:"40"}}),t._v("\n                      "+t._s(t.videoInfo.anchor)+"\n                    ")])]),t._v(" "),n("div",{staticClass:"video-play-cover w-100 h-100"}),t._v(" "),n("img",{staticClass:"w-100",attrs:{src:t.liveInfo.logo,alt:"live11"}})])])]):n("b-col",{staticClass:"px-0",staticStyle:{"overflow-x":"hidden"},attrs:{md:"12",lg:"6",xl:"6"}},[n("div",{staticClass:"position-relative video-play-block h-100",class:{"video-play":t.isLiveVedio}},[n("div",{staticClass:"video-author d-flex position-absolute"},[n("div",{staticClass:"left"},[n("img",{attrs:{src:t.liveInfo.avatar,width:"40",height:"40"}}),t._v("\n                    "+t._s(t.videoInfo.anchor)+"\n                  ")])]),t._v(" "),n("div",{staticClass:"video-play-cover h-100"}),t._v(" "),n("img",{staticClass:"h-100",attrs:{src:t.liveInfo.logo,alt:"live11"}})])]),t._v(" "),t.isLive?n("b-col",{staticClass:"live-content isLive px-5",attrs:{md:"12",lg:"4",xl:"4"}},[t.isLiveVedio?n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.closeLiveVedio()}}},[t._v("×")]):t._e(),t._v(" "),n("div",{ref:"liveTitleRef",staticClass:"live-title"},[n("div",{staticClass:"title"},[t._v(t._s(t.videoInfo.title))]),t._v(" "),n("div",{staticClass:"row"},[t.isloginStatus?n("div",{staticClass:"num col"},[n("i",{staticClass:"fas fa-broadcast-tower"}),t._v("\n                    "+t._s(Object.keys(t.liveWebSocketClientList).length)+"人在线\n                  ")]):n("div",{staticClass:"num col"},[n("i",{staticClass:"fas fa-broadcast-tower"}),t._v("\n                    登陆后查看\n                  ")]),t._v(" "),n("div",{staticClass:"look col"},[n("i",{staticClass:"fas fa-eye"}),t._v("\n                    "+t._s(t.videoInfo.hits)+"次人观看\n                  ")])])]),t._v(" "),t.isLiveVedio?n("div",{ref:"liveInteractiveRef",staticClass:"live-user-interactive"},[n("b-tabs",{attrs:{"content-class":"live-interactive-content","nav-wrapper-class":"live-interactive-nav"}},[n("b-tab",{attrs:{title:"聊天",active:""},on:{click:function(e){return t.isInteractive()}}},[n("ul",{staticClass:"interactive-list"})]),t._v(" "),n("b-tab",{attrs:{title:"提问"},on:{click:function(e){return t.isQuestion()}}},[n("ul",{staticClass:"question-list"},t._l(t.liveQuestionList,function(e){return n("li",{key:e.id},[n("ul",[n("li",[n("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.username))]),t._v("\n                            提出问题："+t._s(e.question)+"\n                          ")]),t._v(" "),n("li",[t._v("\n                            "+t._s(e.anchor)+"回答\n                            "),n("span",{staticClass:"font-weight-bold"},[t._v(t._s(e.username))]),t._v("\n                            ："+t._s(e.answer)+"\n                          ")])])])}),0)])],1)],1):n("div",{ref:"liveStatus",staticClass:"live-status"},[t.isLiveEnd?n("div",{staticClass:"title text-center"},[t._v("直播已结束")]):n("div",{staticClass:"title text-center"},[t._v("正在直播")]),t._v(" "),n("div",{staticClass:"live-btn text-center"},[t.isLiveEnd?n("button",{staticClass:"btn btn-look",attrs:{type:"button"},on:{click:function(e){return t.bigLiveBtn()}}},[t._v("观看回放")]):n("button",{staticClass:"btn btn-look",attrs:{type:"button"},on:{click:function(e){return t.bigLiveBtn()}}},[t._v("立即观看")])])]),t._v(" "),t.isLiveVedio?n("div",{ref:"liveUserInputRef",staticClass:"live-user-input"},[n("b-form",{attrs:{inline:""},on:{submit:t.onSubmit}},[n("label",[n("b-input",{staticClass:"post-input",attrs:{placeholder:"参与互动..."},model:{value:t.liveInteractiveInput,callback:function(e){t.liveInteractiveInput=e},expression:"liveInteractiveInput"}})],1),t._v(" "),t.liveInteractiveType?n("b-button",{staticClass:"post-mes",attrs:{disabled:""===t.liveInteractiveInput},on:{click:function(e){return t.addChat()}}},[t._v("提交")]):n("b-button",{staticClass:"post-mes",attrs:{disabled:""===t.liveInteractiveInput},on:{click:function(e){return t.addQues()}}},[t._v("提问")])],1)],1):n("div",{ref:"livePrice",staticClass:"live-price"},[t.isToll?n("a",{staticClass:"title"},[t._v("\n                  ￥789\n                  "),t.isTolled?n("span",[t._v("（您已经付费购买）")]):n("span",[t._v("（付费观看）")])]):n("a",{staticClass:"title cursor-default"},[t._v("免费视频")])])]):n("b-col",{staticClass:"live-content px-5",attrs:{md:"12",lg:"6",xl:"6"}},[n("h3",{staticClass:"live-title mt-3"},[t._v(t._s(t.videoInfo.title))]),t._v(" "),n("div",{staticClass:"mt-2 mt-md-3 mt-lg-3 mt-xl-4 live-text-muted"},[t._v(t._s(t.videoInfo.live_time))]),t._v(" "),n("div",{staticClass:"mt-1 live-text-muted"},[t._v("讲师："+t._s(t.videoInfo.anchor))]),t._v(" "),n("div",{staticClass:"mt-2 mt-md-3 mt-lg-3 mt-xl-3 live-card",domProps:{innerHTML:t._s(t.liveInfo.content)}},[t._v(t._s(t.liveInfo.content))]),t._v(" "),n("span",{staticClass:"badge badge-live mt-2 mt-md-3 mt-lg-3 mt-xl-4"},[t._v(t._s(t.videoInfo.category))]),t._v(" "),t.isToll?n("div",{staticClass:"video-type video-toll mt-2 mt-md-3 mt-lg-3 mt-xl-4"},[t._v("￥"+t._s(t.videoInfo.price))]):n("div",{staticClass:"video-type video-free mt-2 mt-md-3 mt-lg-3 mt-xl-4"},[t._v("免费视频")]),t._v(" "),n("div",{staticClass:"mt-2 mt-md-3 mt-lg-3 mt-xl-5 live-button"},[t.isToll?t._e():n("button",{staticClass:"btn btn-reservation video-free mr-0 mr-sm-0 mr-md-3 mr-lg-3 mr-xl-5 mt-4 mt-sm-4 mt-md-0 mt-lg-0 mt-xl-0",attrs:{type:"button"}},[t._v("立即预约")]),t._v(" "),t.isToll?n("button",{staticClass:"btn btn-reservation video-toll mr-0 mr-sm-0 mr-md-3 mr-lg-3 mr-xl-5 mt-4 mt-sm-4 mt-md-0 mt-lg-0 mt-xl-0",attrs:{type:"button"},on:{click:function(e){return t.showBuyLiveModal()}}},[t._v("立即购买")]):t._e(),t._v(" "),n("button",{staticClass:"btn btn-advisory ml-0 ml-sm-5 ml-md-3 ml-lg-3 ml-xl-5 mt-4 mt-sm-4 mt-md-0 mt-lg-0 mt-xl-0",attrs:{type:"button"},on:{click:function(e){return t.gotoServer()}}},[t._v("立即咨询")])])])],1)],1),t._v(" "),n("div",{staticClass:"live-content mt-5 mb-5 pb-5"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-md-12 col-lg-8 col-xl-8"},[n("b-tabs",{attrs:{"content-class":"mt-4"}},[n("b-tab",{staticClass:"introduction",attrs:{title:"课程介绍",active:""}},[null!==t.liveInfo.description&&""!==t.liveInfo.description?n("div",[n("div",{domProps:{innerHTML:t._s(t.liveData.description)}},[t._v(t._s(t.liveData.description))])]):n("div",{staticClass:"noData mt-4"},[n("div",{staticClass:"shadow-none p-3 mb-5 bg-light rounded text-center"},[t._v("暂无数据")])])]),t._v(" "),n("b-tab",{staticClass:"schedule",attrs:{title:"直播日程"}},[null!==t.liveInfo.schedule&&""!==t.liveInfo.description?n("div",[n("div",{domProps:{innerHTML:t._s(t.liveInfo.schedule)}},[t._v(t._s(t.liveInfo.schedule))])]):n("div",{staticClass:"noData mt-4"},[n("div",{staticClass:"shadow-none p-3 mb-5 bg-light rounded text-center"},[t._v("暂无数据")])])]),t._v(" "),n("b-tab",{staticClass:"evaluation",attrs:{title:"用户评价"}},[n("div",{staticClass:"rate d-flex align-items-center"},[0!==t.liveInfo.rate?[t._v("\n                      总评分\n                    ")]:[t._v("\n                      满意度调查\n                    ")],t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:0!==t.liveInfo.rate?"你已评价，无法修改！":"请慎重点评，提交后无法修改！",placement:"top"}},[n("div",{staticClass:"starrating risingstar d-flex justify-content-center flex-row-reverse",class:{disabledStar:0!==t.liveInfo.rate}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.userRate,expression:"userRate"}],attrs:{type:"radio",id:"star5",name:"rating",value:"5",disabled:0!==t.liveInfo.rate},domProps:{checked:t._q(t.userRate,"5")},on:{change:function(e){t.userRate="5"}}}),t._v(" "),n("label",{attrs:{for:"star5",title:"5 星"}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.userRate,expression:"userRate"}],attrs:{type:"radio",id:"star4",name:"rating",value:"4",disabled:0!==t.liveInfo.rate},domProps:{checked:t._q(t.userRate,"4")},on:{change:function(e){t.userRate="4"}}}),t._v(" "),n("label",{attrs:{for:"star4",title:"4 星"}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.userRate,expression:"userRate"}],attrs:{type:"radio",id:"star3",name:"rating",value:"3",disabled:0!==t.liveInfo.rate},domProps:{checked:t._q(t.userRate,"3")},on:{change:function(e){t.userRate="3"}}}),t._v(" "),n("label",{attrs:{for:"star3",title:"3 星"}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.userRate,expression:"userRate"}],attrs:{type:"radio",id:"star2",name:"rating",value:"2",disabled:0!==t.liveInfo.rate},domProps:{checked:t._q(t.userRate,"2")},on:{change:function(e){t.userRate="2"}}}),t._v(" "),n("label",{attrs:{for:"star2",title:"2 星"}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.userRate,expression:"userRate"}],attrs:{type:"radio",id:"star1",name:"rating",value:"1",disabled:0!==t.liveInfo.rate},domProps:{checked:t._q(t.userRate,"1")},on:{change:function(e){t.userRate="1"}}}),t._v(" "),n("label",{attrs:{for:"star1",title:"1 星"}})])])],2),t._v(" "),n("div",{staticClass:"my-comment text-center mt-2"},[n("b-form-textarea",{attrs:{id:"textarea",placeholder:"想说点什么...",rows:"5","max-rows":"5"},model:{value:t.myComments,callback:function(e){t.myComments=e},expression:"myComments"}}),t._v(" "),n("button",{staticClass:"btn btn-reservation mt-4",attrs:{type:"button"},on:{click:function(e){return t.addUserCommentRate()}}},[t._v("提交评论")])],1),t._v(" "),0!==Object.keys(t.liveCommentList).length?[n("b-card",{staticClass:"list-comments mt-3"},[t._l(t.liveCommentList,function(e,o){return n("b-media",{key:o},[n("b-img",{attrs:{slot:"aside",src:e.avatar,width:"36",height:"36"},slot:"aside"}),t._v(" "),n("div",{staticClass:"user mt-0 clearfix"},[n("span",{staticClass:"name"},[t._v(t._s(e.username))])]),t._v(" "),n("p",[t._v(t._s(e.content))]),t._v(" "),0!==Object.keys(e.reply_list).length?[n("re-sub-comment",{key:e.id,attrs:{data:e.reply_list}})]:t._e()],2)}),t._v(" "),n("div",{staticClass:"live-pagination mt-5 mb-5 text-center"},[n("el-pagination",{attrs:{"current-page":t.currentPage,background:"",layout:"prev, next","prev-text":"上一页","next-text":"下一页",disabled:t.isDisabled},on:{"current-change":t.currentChange}})],1)],2)]:n("div",{staticClass:"noData mt-4"},[n("div",{staticClass:"shadow-none p-3 mb-5 bg-light rounded text-center"},[t._v("暂无数据")])])],2)],1)],1),t._v(" "),n("div",{staticClass:"col-auto col-md-auto col-lg-4 col-xl-4 d-none d-md-none d-lg-block d-xl-block live-more"},[n("h3",{staticClass:"title"},[t._v("猜你可能喜欢")]),t._v(" "),t._l(t.randRecommendList,function(e){return n("figure",{key:e.id,staticClass:"image mt-3 position-relative",staticStyle:{cursor:"pointer",width:"350px",overflow:"hidden"},on:{click:function(n){return t.gotoItem(e)}}},[n("img",{staticClass:"live5 w-100",attrs:{src:e.logo,alt:"logo"}}),t._v(" "),n("div",{staticClass:"text"},[t._v(t._s(e.title))])])})],2)])]),t._v(" "),n("b-modal",{ref:"buyLiveModalRef",staticClass:"buyModal",attrs:{centered:"","no-close-on-backdrop":"","hide-footer":"",title:"直播付费方式"}},[n("div",{attrs:{slot:"modal-header"},slot:"modal-header"},[t.orderResponsing?t._e():n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.closeBuyLiveModal()}}},[t._v("×")]),t._v(" "),n("h5",{staticClass:"modal-title"},[t._v("直播付费方式")])]),t._v(" "),n("div",{staticClass:"d-block buy-body"},[t.orderResponsing||t.orderOk?t._e():n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-md-6 buy-qr"},[n("img",{attrs:{src:"/images/live15.png",alt:"live15"}})]),t._v(" "),n("div",{staticClass:"col-12 col-md-6 buy-tip"},[n("div",{staticClass:"title"},[t._v("\n                  应付金额：\n                  "),n("span",[t._v("\n                    118\n                    "),n("small",[t._v("元")])])]),t._v(" "),n("div",{staticClass:"pay-type"},[n("i",{staticClass:"fab fa-weixin"}),t._v(" 使用微信扫码支付\n                ")])])]),t._v(" "),t.orderResponsing?n("div",{staticClass:"order-response"},[n("div",{staticClass:"spinner"},[n("b-spinner",{attrs:{variant:"primary",label:"加载中..."}})],1),t._v(" "),n("div",{staticClass:"tips-text"},[t._v("订单响应中...")]),t._v(" "),n("div",{staticClass:"tips-text"},[t._v("请勿关闭窗口动作！")])]):t._e(),t._v(" "),t.orderOk?n("div",{staticClass:"order-ok"},[n("i",{staticClass:"fas fa-check-circle"}),t._v("\n              已经支付成功!\n            ")]):t._e()])])],1),t._v(" "),n("sidebar-tools")],1),t._v(" "),n("Footer"),t._v(" "),t.bigLiveStatus?n("div",{ref:"bigLiveCover",staticClass:"big-live-cover"}):t._e()],1)},[],!1,null,null,null);e.default=component.exports}}]);