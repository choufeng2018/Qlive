(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{384:function(e,t,n){"use strict";n.r(t);n(63);var o=n(10),r=n(352),c=n(353),m=n(64),f={props:["clickedNext","currentStep"],mixins:[r.validationMixin],data:function(){return{infoForm:{phoneNum:"",verifyCode:""},content:"获取验证码",totalTime:180,canClick:!0}},validations:{infoForm:{phoneNum:{required:c.required},verifyCode:{required:c.required}}},watch:{$v:{handler:function(e){var t=this;e.$invalid?(this.$emit("can-continue",{value:!1}),setTimeout(function(){t.$emit("change-next",{nextBtnValue:!1})},3e3)):this.$emit("can-continue",{value:!0})},deep:!0},clickedNext:function(e){!0===e&&this.$v.infoForm.$touch()}},methods:{getCode:function(){this.countDown()},countDown:function(){var e=this;if(e.canClick){e.canClick=!1,e.content=e.totalTime+"s后重新发送";var t=setInterval(function(){e.totalTime--,e.content=e.totalTime+"s后重新发送",e.totalTime<0&&(clearInterval(t),e.content="重新获取验证码",e.totalTime=10,e.canClick=!0)},1e3)}},getSMS:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this).countDown(),e.next=4,Object(m.getSMSApi)(t,t.infoForm.phoneNum,2);case 4:1===(n=e.sent).code?t.$message({type:"success",message:n.msg,duration:5e3}):t.$message({type:"warning",message:n.msg,duration:5e3});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),checkCode:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(t=this).infoForm.phoneNum||""!==t.infoForm.verifyCode){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Object(m.checkSMSApi)(t,t.infoForm.phoneNum,t.infoForm.verifyCode,2);case 5:1===(n=e.sent).code?t.$emit("can-continue",{value:!0}):(t.$message({type:"error",message:n.msg+"，请重新获取验证码！",duration:5e3}),t.$emit("can-continue",{value:!1}));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},mounted:function(){this.$v.$invalid,this.$emit("can-continue",{value:!1}),this.$nextTick(function(){})}},l=n(23),component=Object(l.a)(f,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"forget-main"},[n("b-form",{attrs:{id:"forget1"}},[n("b-form-group",[n("b-form-input",{class:e.$v.infoForm.phoneNum.$error?"error-input":"",attrs:{type:"text",required:"",placeholder:"手机号（注册时的手机号码）"},model:{value:e.infoForm.phoneNum,callback:function(t){e.$set(e.infoForm,"phoneNum",t)},expression:"infoForm.phoneNum"}})],1),e._v(" "),n("b-form-group",{staticClass:"get-code"},[n("b-form-input",{class:e.$v.infoForm.verifyCode.$error?"error-input":"",attrs:{type:"text",required:"",placeholder:"请输入验证码"},on:{blur:function(t){return e.checkCode()}},model:{value:e.infoForm.verifyCode,callback:function(t){e.$set(e.infoForm,"verifyCode",t)},expression:"infoForm.verifyCode"}}),e._v(" "),n("b-button",{staticClass:"btn-get-code",attrs:{variant:"light",disabled:!e.canClick},on:{click:function(t){return e.getCode()}}},[e._v(e._s(e.content))])],1)],1)],1)},[],!1,null,null,null);t.default=component.exports}}]);